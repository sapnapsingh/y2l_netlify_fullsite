<html><head><title>Y2L Summer Program Enrollment</title></head><body><form id="signupForm" method="POST" onsubmit="return false;">
<h2>Parent Information</h2>
<label>Parent Name: <input name="parent_name" required="" type="text"/></label><br/>
<label>Email: <input name="email" required="" type="email"/></label><br/>
<label>Phone: <input name="phone" required="" type="tel"/></label><br/>
<h2>Student Information</h2>
<label>Student 1 Name: <input name="student_name_1" required="" type="text"/></label><br/>
<label>Grade: <input name="grade_1" required="" type="text"/></label><br/>
<label>School: <input name="school_1" required="" type="text"/></label><br/>
<br/><br/>
<h2>Program Selection by Week</h2><table class="program-grid" style="width:100%;border-collapse:collapse;font-family:sans-serif;font-size:14px;"><thead><tr><th string="Week"></th><th>Math</th><th>Public Speaking</th><th>Creative Writing</th><th>Chess</th><th>Python</th><th>Book Club</th><th>Lego Robotics</th></tr></thead><tbody><tr><td><div>Week 1</div><div>June 9 - 13</div></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 1 - Math" type="checkbox"/><br/><div>9-11 am</div></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 1 - Public Speaking" type="checkbox"/><br/><div>11:30 am - 1:30 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 1 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 1 - Lego Robotics" type="checkbox"/></td></tr><tr><td><div>Week 2</div><div>June 16 - 20</div></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 2 - Math" type="checkbox"/><br/><div>9-11 am</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 2 - Creative Writing" type="checkbox"/><br/><div>11:30 am - 1:30 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 2 - Python" type="checkbox"/><br/><div>2-4 pm</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 2 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 2 - Lego Robotics" type="checkbox"/></td></tr><tr><td><div>Week 3</div><div>June 23 - 27</div></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 3 - Math" type="checkbox"/><br/><div>1-3 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 3 - Chess" type="checkbox"/><br/><div>9 am - 12 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 3 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 3 - Lego Robotics" type="checkbox"/></td></tr><tr><td><div>Week 4</div><div>June 30 - July 3</div></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 4 - Math" type="checkbox"/><br/><div>1-3 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 4 - Chess" type="checkbox"/><br/><div>9 am - 12 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 4 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 4 - Lego Robotics" type="checkbox"/></td></tr><tr><td><div>Week 5</div><div>July 7 - 11</div></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 5 - Math" type="checkbox"/><br/><div>9-11 am</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 5 - Creative Writing" type="checkbox"/><br/><div>11:30 am - 1:30 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 5 - Python" type="checkbox"/><br/><div>2-4 pm</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 5 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 5 - Lego Robotics" type="checkbox"/></td></tr><tr><td><div>Week 6</div><div>July 14 - 18</div></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 6 - Math" type="checkbox"/><br/><div>9-11 am</div></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 6 - Public Speaking" type="checkbox"/><br/><div>11:30 am - 1:30 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 6 - Python" type="checkbox"/><br/><div>2-4 pm</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 6 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 6 - Lego Robotics" type="checkbox"/></td></tr><tr><td><div>Week 7</div><div>July 21 - 25</div></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 7 - Math" type="checkbox"/><br/><div>1-3 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 7 - Creative Writing" type="checkbox"/><br/><div>3:30 - 5:30 pm</div></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 7 - Chess" type="checkbox"/><br/><div>9 am - 12 pm</div></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 7 - Python" type="checkbox"/><br/><div>2-4 pm</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 7 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 7 - Lego Robotics" type="checkbox"/></td></tr><tr><td><div>Week 8</div><div>July 28 - August 1</div></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 8 - Math" type="checkbox"/><br/><div>1-3 pm</div></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 8 - Public Speaking" type="checkbox"/><br/><div>3:30 - 5:30 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input name="S1 - Week 8 - Chess" type="checkbox"/><br/><div>9 am - 12 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 8 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S1 - Week 8 - Lego Robotics" type="checkbox"/></td></tr></tbody></table><label style="display:block; margin-top:30px; margin-bottom:10px; font-weight:500;"><input id="add-student-2" onclick="toggleStudent2(this.checked)" type="checkbox"/> Add Sibling</label><div id="student2Fields">
<h3>Sibling Information</h3>
<label>Student 2 Name: <input disabled="" name="student_name_2" type="text"/></label><br/>
<label>Grade: <input disabled="" name="grade_2" type="text"/></label><br/>
<label>School: <input disabled="" name="school_2" type="text"/></label><br/>
<h4 string="Sibling Program Selection"></h4><table class="program-grid" style="width:100%;border-collapse:collapse;font-family:sans-serif;font-size:14px;"><thead><tr><th string="Week"></th><th>Math</th><th>Public Speaking</th><th>Creative Writing</th><th>Chess</th><th>Python</th><th>Book Club</th><th>Lego Robotics</th></tr></thead><tbody><tr><td><div>Week 1</div><div>June 9 - 13</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 1 - Math" type="checkbox"/><br/><div>9-11 am</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 1 - Public Speaking" type="checkbox"/><br/><div>11:30 am - 1:30 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 1 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 1 - Lego Robotics" type="checkbox"/></td></tr><tr><td><div>Week 2</div><div>June 16 - 20</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 2 - Math" type="checkbox"/><br/><div>9-11 am</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 2 - Creative Writing" type="checkbox"/><br/><div>11:30 am - 1:30 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 2 - Python" type="checkbox"/><br/><div>2-4 pm</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 2 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 2 - Lego Robotics" type="checkbox"/></td></tr><tr><td><div>Week 3</div><div>June 23 - 27</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 3 - Math" type="checkbox"/><br/><div>1-3 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 3 - Chess" type="checkbox"/><br/><div>9 am - 12 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 3 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 3 - Lego Robotics" type="checkbox"/></td></tr><tr><td><div>Week 4</div><div>June 30 - July 3</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 4 - Math" type="checkbox"/><br/><div>1-3 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 4 - Chess" type="checkbox"/><br/><div>9 am - 12 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 4 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 4 - Lego Robotics" type="checkbox"/></td></tr><tr><td><div>Week 5</div><div>July 7 - 11</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 5 - Math" type="checkbox"/><br/><div>9-11 am</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 5 - Creative Writing" type="checkbox"/><br/><div>11:30 am - 1:30 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 5 - Python" type="checkbox"/><br/><div>2-4 pm</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 5 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 5 - Lego Robotics" type="checkbox"/></td></tr><tr><td><div>Week 6</div><div>July 14 - 18</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 6 - Math" type="checkbox"/><br/><div>9-11 am</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 6 - Public Speaking" type="checkbox"/><br/><div>11:30 am - 1:30 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 6 - Python" type="checkbox"/><br/><div>2-4 pm</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 6 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 6 - Lego Robotics" type="checkbox"/></td></tr><tr><td><div>Week 7</div><div>July 21 - 25</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 7 - Math" type="checkbox"/><br/><div>1-3 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 7 - Creative Writing" type="checkbox"/><br/><div>3:30 - 5:30 pm</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 7 - Chess" type="checkbox"/><br/><div>9 am - 12 pm</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 7 - Python" type="checkbox"/><br/><div>2-4 pm</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 7 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 7 - Lego Robotics" type="checkbox"/></td></tr><tr><td><div>Week 8</div><div>July 28 - August 1</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 8 - Math" type="checkbox"/><br/><div>1-3 pm</div></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 8 - Public Speaking" type="checkbox"/><br/><div>3:30 - 5:30 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 8 - Chess" type="checkbox"/><br/><div>9 am - 12 pm</div></td><td style="text-align:center;padding:6px;"></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 8 - Book Club" type="checkbox"/></td><td style="text-align:center;padding:6px;"><input disabled="disabled" name="S2 - Week 8 - Lego Robotics" type="checkbox"/></td></tr></tbody></table></div>
<h3>Fee Summary</h3>
<div style="background:#f0f8ff;padding:10px;width:300px;">
Base Fee: $<span id="baseFee">0</span><br/>
Discount: $<span id="discount">0</span><br/>
Total Due: $<span id="amountDue">0</span><br/>
<small id="discount-details" style="color:green;"></small>
</div>
<br/><button onclick="submitForm()" type="submit">Submit Enrollment</button>
</form><script>
function toggleStudent2(checked) {
  const info = document.getElementById("student2Fields");
  const inputs = info.querySelectorAll("input[type=text]");
  const checkboxes = info.querySelectorAll("input[type=checkbox]");
  info.style.display = checked ? "" : "none";
  inputs.forEach(el => el.disabled = !checked);
  checkboxes.forEach(cb => {
    if (!cb.hasAttribute("data-disabled")) {
      cb.disabled = !checked;
    }
  });
  updateFee();
}

function updateFee() {
  const today = new Date();
  const earlyBirdEnd = new Date("2025-05-21");
  const isEarlyBird = today <= earlyBirdEnd;

  const feeMap = {
    "Math": 160,
    "Public Speaking": 160,
    "Creative Writing": 160,
    "Chess": 300,
    "Python": 170
  };

  const checkboxes = document.querySelectorAll("input[type=checkbox]");
  const selected = [...checkboxes].filter(cb => cb.checked && !cb.disabled);

  let totalFee = 0;
  let student1Weeks = {};
  let student2Weeks = {};
  let discountLines = [];

  const countWeeks = (obj, prog, week) => {
    if (!obj[prog]) obj[prog] = [];
    obj[prog].push(week);
  };

  selected.forEach(cb => {
    const parts = cb.name.split(" - ");
    const student = parts[0];
    const week = parts[1];
    const program = parts[2];
    const fee = feeMap[program] || 0;

    if (student === "S1") countWeeks(student1Weeks, program, week);
    if (student === "S2") countWeeks(student2Weeks, program, week);

    totalFee += fee;
  });

  let discount = 0;

  const applyDiscounts = (studentWeeks, label) => {
    let subdiscount = 0;
    Object.entries(studentWeeks).forEach(([prog, weeks]) => {
      const count = weeks.length;

      if (prog === "Chess") {
        if (isEarlyBird) {
          subdiscount += 25 * count;
          discountLines.push(`${label}: $25 early bird per Chess week (-$${25 * count})`);
        }
        if (count >= 2) {
          subdiscount += 5 * count;
          discountLines.push(`${label}: $5 multi-week Chess (-$${5 * count})`);
        }
      } else {
        if (isEarlyBird) {
          subdiscount += 10 * count;
          discountLines.push(`${label}: $10 early bird per ${prog} week (-$${10 * count})`);
          if (count >= 4) {
            subdiscount += 5 * count;
            discountLines.push(`${label}: $5 multi-week (${prog}) (-$${5 * count})`);
          }
        }
      }
    });
    return subdiscount;
  };

  discount += applyDiscounts(student1Weeks, "Student 1");
  discount += applyDiscounts(student2Weeks, "Student 2");

  const s1count = Object.values(student1Weeks).reduce((a, b) => a + b.length, 0);
  const s2count = Object.values(student2Weeks).reduce((a, b) => a + b.length, 0);
  if (isEarlyBird && s1count >= 4 && s2count >= 4) {
    const siblingWeeks = s2count;
    discount += 5 * siblingWeeks;
    discountLines.push(`Sibling Bonus: $5/week off for ${siblingWeeks} sibling weeks (-$${5 * siblingWeeks})`);
  }

  const finalTotal = totalFee - discount;

  document.getElementById("baseFee").textContent = totalFee;
  document.getElementById("discount").textContent = discount;
  document.getElementById("amountDue").textContent = finalTotal;

  const detailEl = document.getElementById("discount-details");
  detailEl.innerHTML = discountLines.length
    ? "<ul>" + discountLines.map(d => `<li>${d}</li>`).join("") + "</ul>"
    : "";
}

document.addEventListener("DOMContentLoaded", () => {
  toggleStudent2(false);
  document.querySelectorAll("input[type=checkbox]").forEach(cb =>
    cb.addEventListener("change", updateFee)
  );
});
</script><script>
async function submitForm() {
  const form = document.getElementById("signupForm");

  const payload = {
    timestamp: new Date().toISOString(),
    parentName: form.parent_name.value,
    email: form.email.value,
    phone: form.phone.value,
    student_1_name: form.student_name_1.value,
    grade_1: form.grade_1.value,
    school_1: form.school_1.value,
    student_2_name: form.student_name_2?.value || "",
    grade_2: form.grade_2?.value || "",
    school_2: form.school_2?.value || "",
    baseFee: document.getElementById("baseFee").textContent,
    discount: document.getElementById("discount").textContent,
    finalFee: document.getElementById("amountDue").textContent
  };

  // Add checkbox selections
  const checkboxes = document.querySelectorAll("input[type=checkbox]");
  checkboxes.forEach(cb => {
    payload[cb.name] = cb.checked ? "Yes" : "";
  });

  try {
    window.location.assign("https://y2lacademy.com/summer-processing-wait-screen");

    await fetch("/.netlify/functions/submit", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    setTimeout(() => {
      window.location.assign("https://y2lacademy.com/summer-confirmation");
    }, 3000);
  } catch (error) {
    alert("Submission failed. Please try again.");
  }
}
</script></body></html>