
<!DOCTYPE html>

<html><head>
<meta charset="utf-8"/>
<title>Y2L Summer Enrollment</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    background-color: #f9f9f9;
    color: #333;
    padding: 20px;
  }

  h2 {
    color: #a05767;
    text-align: center;
  }

  .section {
    margin-bottom: 30px;
    padding: 20px;
    background-color: #ffffff;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }

  label {
    display: block;
    margin-top: 10px;
    font-weight: 600;
    color: #2a7ae2;
  }

  input[type="text"],
  input[type="email"],
  input[type="tel"] {
    width: 100%;
    padding: 10px;
    margin-top: 4px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 16px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
    font-size: 15px;
  }

  th, td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: center;
    vertical-align: top;
  }

  th {
    background-color: #e9effb;
    color: #2a7ae2;
  }

  .btn {
    background-color: #2a7ae2;
    color: white;
    border: none;
    padding: 12px 24px;
    font-size: 16px;
    border-radius: 6px;
    margin-top: 15px;
    cursor: pointer;
    font-weight: bold;
  }

  .btn:hover {
    background-color: #195bb1;
  }

  .total-box {
    margin-top: 20px;
    background-color: #fefefe;
    padding: 20px;
    border: 2px solid #2a7ae2;
    border-radius: 8px;
  }

  .total-box p {
    margin: 10px 0;
    font-size: 17px;
  }

  .discount-breakdown {
    font-size: 14px;
    color: #555;
    margin-top: 8px;
  }

  .hours-label {
    font-size: 12px;
    color: #666;
    margin-top: 4px;
  }
</style>
</head>
<body>
<h2>Y2L Summer Program Signup Form</h2>
<form id="signupForm">
<div class="section">
  <h3>Parent Information</h3>
<label>Parent Name:</label><input name="parent_name" required="" type="text"/>
<label>Email:</label><input name="email" required="" type="email"/>
<label>Phone Number:</label><input name="phone" required="" type="tel"/>
</div>
<div class="section">
<h3>Student Information</h3>
<label>Student Name:</label><input name="student_name_1" required="" type="text"/>
<label>Grade:</label><input name="grade_1" required="" type="text"/>
<label>School:</label><input name="school_1" required="" type="text"/>
<table><thead><tr><th>Week</th><th>Math</th><th>Public Speaking</th><th>Creative Writing</th>
<th>Chess</th><th>Python</th><th>Robotics</th><th>Book Club</th></tr></thead><tbody><tr><td>Week 1</td><td><input name="student_1_week1_math" type="checkbox"/><div class="hours-label">9:00–11:00 am</div></td><td><input name="student_1_week1_public_speaking" type="checkbox"/><div class="hours-label">11.30 am-1.30 pm</div></td><td></td><td></td><td><input name="student_1_week1_python" type="checkbox"/><div class="hours-label">2:00–4:00 pm</div></td><td><input disabled="" name="student_1_week1_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_1_week1_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>

<tr><td>Week 2</td><td><input name="student_1_week2_math" type="checkbox"/><div class="hours-label">9:00–11:00 am</div></td><td></td><td><input name="student_1_week2_creative_writing" type="checkbox"/><div class="hours-label">11.30 am-1.30 pm</div></td><td></td><td><input name="student_1_week2_python" type="checkbox"/><div class="hours-label">2:00–4:00 pm</div></td><td><input disabled="" name="student_1_week2_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_1_week2_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>

<tr><td>Week 3</td><td><input name="student_1_week3_math" type="checkbox"/><div class="hours-label">1:00–3:00 pm</div></td><td></td><td></td><td><input name="student_1_week3_chess" type="checkbox"/><div class="hours-label">9:00 am –12:00 pm</div></td><td></td><td><input disabled="" name="student_1_week3_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_1_week3_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>

<tr><td>Week 4</td><td><input name="student_1_week4_math" type="checkbox"/><div class="hours-label">1:00–3:00 pm</div></td><td></td><td></td><td><input name="student_1_week4_chess" type="checkbox"/><div class="hours-label">9:00 am –12:00 pm</div></td><td></td><td><input disabled="" name="student_1_week4_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_1_week4_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>

<tr><td>Week 5</td><td><input name="student_1_week5_math" type="checkbox"/><div class="hours-label">9:00–11:00</div></td><td></td><td><input name="student_1_week5_creative_writing" type="checkbox"/><div class="hours-label">11.30 am-1.30 pm</div></td><td></td><td><input name="student_1_week5_python" type="checkbox"/><div class="hours-label">2:00–4:00 pm</div></td><td><input disabled="" name="student_1_week5_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_1_week5_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>

<tr><td>Week 6</td><td><input name="student_1_week6_math" type="checkbox"/><div class="hours-label">9:00–11:00</div></td><td><input name="student_1_week6_public_speaking" type="checkbox"/><div class="hours-label">11.30 am-1.30 pm</div></td><td></td><td></td><td><input name="student_1_week6_python" type="checkbox"/><div class="hours-label">2:00–4:00 pm</div></td><td><input disabled="" name="student_1_week6_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_1_week6_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>

<tr><td>Week 7</td><td><input name="student_1_week7_math" type="checkbox"/><div class="hours-label">1:00–3:00 pm</div></td><td></td><td><input name="student_1_week7_creative_writing" type="checkbox"/><div class="hours-label">3.30 pm-5.30 pm</div></td><td><input name="student_1_week7_chess" type="checkbox"/><div class="hours-label">9:00 am–12:00 pm</div></td><td></td><td><input disabled="" name="student_1_week7_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_1_week7_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>

<tr><td>Week 8</td><td><input name="student_1_week8_math" type="checkbox"/><div class="hours-label">1:00–3:00 pm</div></td><td><input name="student_1_week8_public_speaking" type="checkbox"/><div class="hours-label">3.30 pm-5.30 pm</div></td><td></td><td><input name="student_1_week8_chess" type="checkbox"/><div class="hours-label">9:00 am–12:00 pm</div></td><td></td><td><input disabled="" name="student_1_week8_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_1_week8_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>
</tbody></table>
</div>
<div class="section">
<label><input id="enable_student2" onchange="toggleStudent2()" type="checkbox"/> I want to enroll a second student</label>

<h3>Sibling Information</h3>
<label>Student Name:</label><input name="student_name_2" type="text"/>
<label>Grade:</label><input name="grade_2" type="text"/>
<label>School:</label><input name="school_2" type="text"/>
<table><thead><tr><th>Week</th><th>Math</th><th>Public Speaking</th><th>Creative Writing</th>
<th>Chess</th><th>Python</th><th>Robotics</th><th>Book Club</th></tr></thead><tbody><tr><td>Week 1</td><td><input name="student_2_week1_math" type="checkbox"/><div class="hours-label">9:00–11:00 am</div></td><td><input name="student_2_week1_public_speaking" type="checkbox"/><div class="hours-label">11.30 am-1.30 pm</div></td><td></td><td></td><td><input name="student_2_week1_python" type="checkbox"/><div class="hours-label">2:00–4:00 pm</div></td><td><input disabled="" name="student_2_week1_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_2_week1_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>

<tr><td>Week 2</td><td><input name="student_2_week2_math" type="checkbox"/><div class="hours-label">9:00–11:00 am</div></td><td></td><td><input name="student_2_week2_creative_writing" type="checkbox"/><div class="hours-label">11.30 am-1.30 pm</div></td><td></td><td><input name="student_2_week2_python" type="checkbox"/><div class="hours-label">2:00–4:00 pm</div></td><td><input disabled="" name="student_2_week2_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_2_week2_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>

<tr><td>Week 3</td><td><input name="student_2_week3_math" type="checkbox"/><div class="hours-label">1:00–3:00 pm</div></td><td></td><td></td><td><input name="student_2_week3_chess" type="checkbox"/><div class="hours-label">9:00 am–12:00 pm</div></td><td></td><td><input disabled="" name="student_2_week3_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_2_week3_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>

<tr><td>Week 4</td><td><input name="student_2_week4_math" type="checkbox"/><div class="hours-label">1:00–3:00 pm</div></td><td></td><td></td><td><input name="student_2_week4_chess" type="checkbox"/><div class="hours-label">9:00 am–12:00 pm</div></td><td></td><td><input disabled="" name="student_2_week4_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_2_week4_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>

<tr><td>Week 5</td><td><input name="student_2_week5_math" type="checkbox"/><div class="hours-label">9:00–11:00 am</div></td><td></td><td><input name="student_2_week5_creative_writing" type="checkbox"/><div class="hours-label">11.30 am-1.30 pm</div></td><td></td><td><input name="student_2_week5_python" type="checkbox"/><div class="hours-label">2:00–4:00 pm</div></td><td><input disabled="" name="student_2_week5_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_2_week5_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>

<tr><td>Week 6</td><td><input name="student_2_week6_math" type="checkbox"/><div class="hours-label">9:00–11:00 am</div></td><td><input name="student_2_week6_public_speaking" type="checkbox"/><div class="hours-label">11.30 am-1.30 pm</div></td><td></td><td></td><td><input name="student_2_week6_python" type="checkbox"/><div class="hours-label">2:00–4:00 pm</div></td><td><input disabled="" name="student_2_week6_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_2_week6_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>

<tr><td>Week 7</td><td><input name="student_2_week7_math" type="checkbox"/><div class="hours-label">1:00–3:00 pm</div></td><td></td><td><input name="student_2_week7_creative_writing" type="checkbox"/><div class="hours-label">3.30 pm-5.30 pm</div></td><td><input name="student_2_week7_chess" type="checkbox"/><div class="hours-label">9:00 am–12:00 pm</div></td><td></td><td><input disabled="" name="student_2_week7_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_2_week7_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>

<tr><td>Week 8</td><td><input name="student_2_week8_math" type="checkbox"/><div class="hours-label">1:00–3:00 pm</div></td><td><input name="student_2_week8_public_speaking" type="checkbox"/><div class="hours-label">3.30 pm-5.30 pm</div></td><td></td><td><input name="student_2_week8_chess" type="checkbox"/><div class="hours-label">9:00 am–12:00 pm</div></td><td></td><td><input disabled="" name="student_2_week8_robotics" type="checkbox"/><div class="hours-label"></div></td><td><input disabled="" name="student_2_week8_book_club" type="checkbox"/><div class="hours-label"></div></td></tr>
</tbody></table>
</div>
<div class="total-box">
<p><strong>Total Fee:</strong> $<span id="baseFee">0</span></p>
<p><strong>Total Discount:</strong> $<span id="discount">0</span></p>
<div class="discount-breakdown" id="discount-details"></div>
<p><strong>Final Amount Due:</strong> $<span id="amountDue">0</span></p>
</div>
<button class="btn" onclick="calculateFee()" type="button">Calculate Total</button>
<button class="btn" onclick="submitToGoogleSheet()" type="button">Submit</button>
</form>
<script>
  // For brevity, script functions can be reattached from previous implementation or included later.
</script>

<script>
function toggleStudent2() {
  const enabled = document.getElementById("enable_student2").checked;
  ['student_name_2','grade_2','school_2'].forEach(id => {
    const input = document.querySelector(`[name="${id}"]`);
    if (enabled) {
      input.setAttribute("required", "required");
    } else {
      input.removeAttribute("required");
      input.value = "";
    }
  });
}

function renderProgramRows(tableId, studentId) {
  const tableBody = document.getElementById(tableId);
  const programSchedule = {
    math: [1,2,3,4,5,6,7,8],
    public_speaking: [1,6,8],
    creative_writing: [2,5,7],
    chess: [3,4,7,8],
    robotics: [3,6],
    python: [2,5,7],
    book_club: [1,4,6]
  };
  const weekDates = {
    1: "Jun 9–13", 2: "Jun 16–20", 3: "Jun 23–27", 4: "Jun 30–Jul 4",
    5: "Jul 7–11", 6: "Jul 14–18", 7: "Jul 21–25", 8: "Jul 28–Aug 1"
  };
  for (let i = 1; i <= 8; i++) {
    const row = document.createElement("tr");
    let html = `<td>Week ${i}<br><small>${weekDates[i]}</small></td>`;
    for (const prog in programSchedule) {
      html += programSchedule[prog].includes(i)
        ? `<td><input type='checkbox' name='${studentId}_week${i}_${prog}'></td>`
        : `<td></td>`;
    }
    row.innerHTML = html;
    tableBody.appendChild(row);
  }
}
renderProgramRows("programTable1", "student_1");
renderProgramRows("programTable2", "student_2");


function calculateFee() {
  const prices = {
    math: 150, public_speaking: 150, creative_writing: 150,
    chess: 200, robotics: 170, python: 170, book_club: 150
  };
  let total = 0, programCount = 0, weekSet = new Set(), studentCount = 0;

  ['student_1','student_2'].forEach(student => {
    let hasPrograms = false;
    for (let i = 1; i <= 8; i++) {
      for (const prog in prices) {
        const box = document.querySelector(`input[name='${student}_week${i}_${prog}']`);
        if (box && box.checked) {
          total += prices[prog]; programCount++; weekSet.add(i); hasPrograms = true;
        }
      }
    }
    if (hasPrograms) studentCount++;
  });

  let discount = 0;
  const today = new Date(), earlyBird = new Date("2025-05-15");
  if (today <= earlyBird) discount += 10 * weekSet.size;
  if (weekSet.size > 2) discount += 15 * (weekSet.size - 2);
  if (programCount > weekSet.size) discount += 20 * (programCount - weekSet.size);
  if (studentCount > 1) discount += 5 * weekSet.size;

  const due = Math.max(0, total - discount);
  document.getElementById("baseFee").textContent = total;
  document.getElementById("discount").textContent = discount;
  let breakdown = [];
  if (today <= earlyBird) breakdown.push(`– Early Bird: $${10 * weekSet.size}`);
  if (weekSet.size > 2) breakdown.push(`– Multi-Week: $${15 * (weekSet.size - 2)}`);
  if (programCount > weekSet.size) breakdown.push(`– Multi-Program: $${20 * (programCount - weekSet.size)}`);
  if (studentCount > 1) breakdown.push(`– Sibling: $${5 * weekSet.size}`);
  document.getElementById("discount-details").innerHTML = "<strong>Discounts Applied:</strong><br>" + breakdown.join("<br>");
  document.getElementById("amountDue").textContent = due;
}


function submitToGoogleSheet() {
  const payload = {
    timestamp: new Date().toISOString(),
    parentName: document.querySelector("input[name='parent_name']").value,
    email: document.querySelector("input[name='email']").value,
    phone: document.querySelector("input[name='phone']").value,
    student_1_name: document.querySelector("input[name='student_name_1']").value,
    student_1_grade: document.querySelector("input[name='grade_1']").value,
    student_1_school: document.querySelector("input[name='school_1']").value,
    student_2_name: document.querySelector("input[name='student_name_2']").value,
    student_2_grade: document.querySelector("input[name='grade_2']").value,
    student_2_school: document.querySelector("input[name='school_2']").value,
    baseFee: document.getElementById("baseFee").textContent,
    discount: document.getElementById("discount").textContent,
    finalFee: document.getElementById("amountDue").textContent
  };

  for (let s = 1; s <= 2; s++) {
    for (let i = 1; i <= 8; i++) {
      for (const prog of ['math','public_speaking','creative_writing','chess','robotics','python','book_club']) {
        const field = `S${s} - Week ${i} - ${prog.replace('_',' ').replace(/\b\w/g,l=>l.toUpperCase())}`;
        const box = document.querySelector(`input[name='student_${s}_week${i}_${prog}']`);
        payload[field] = box && box.checked ? 'Yes' : '';
      }
    }
  }

  console.log("Payload submitted:", payload);
  fetch("/.netlify/functions/submit", {
    method: "POST",
    body: JSON.stringify(payload),
    headers: { "Content-Type": "application/json" }
  })
  .then(response => response.text())
  //.then(result => alert("Submission Successful!"))
  .then(result => window.location.href = "https://y2lacademy.com/summer-confirmation")
  .catch(error => alert("Submission Failed: " + error));
}
</script>
</body></html>
